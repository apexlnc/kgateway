apiVersion: gateway.kgateway.dev/v1alpha1
kind: GatewayParameters
metadata:
  name: agentgateway-dev
  namespace: kgateway-system
spec:
  kube:
    agentgateway:
      enabled: true
      image:
        registry: localhost:5001
        repository: agentgateway
        tag: dev
        pullPolicy: Always
      env:
        - name: ADMIN_ADDR
          value: "0.0.0.0:15000"
---
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: agentgateway
  namespace: kgateway-system
  labels:
    app: agentgateway
spec:
  gatewayClassName: agentgateway
  infrastructure:
    parametersRef:
      name: agentgateway-dev
      group: gateway.kgateway.dev
      kind: GatewayParameters
  listeners:
    - name: http
      protocol: HTTP
      port: 80
      allowedRoutes:
        namespaces:
          from: All
